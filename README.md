<p align="center">
  <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR-X_xAESEu--eipBkRWlj07HCZaEEtwLankg&s" width="60" alt="Sui" />
  &nbsp;&nbsp;&nbsp;
  <img src="https://ens.domains/assets/brand/mark/ens-mark-Blue.svg" width="60" alt="ENS" />
</p>

<h1 align="center">AgentVault</h1>

<p align="center">
  <strong>Constrained Autonomous Agent Spending on Sui + ENS Integration</strong>
</p>

<p align="center">
  <a href="#sui-prize">
    <img src="https://img.shields.io/badge/Sui-DeepBook_v3-4DA2FF?style=for-the-badge&logo=data:image/png;base64,iVBORw0KGgo" alt="Sui Prize" />
  </a>
  &nbsp;
  <a href="#ens-integration">
    <img src="https://img.shields.io/badge/ENS-Constraint_Profiles-5298FF?style=for-the-badge" alt="ENS Prize"  />
  </a>
</p>

<p align="center">
  <em>Give your AI a wallet. With limits.</em>
</p>

---

## Overview

AgentVault enables **autonomous AI agents** to execute transactions and trades within **hard, on-chain spending constraints**. Built on **Sui blockchain** with **DeepBook v3** integration, and featuring a novel **ENS-powered constraint profile system**.

<img width="627" height="auto" alt="overview" src="https://github.com/user-attachments/assets/b41f1259-95c8-4189-8ca8-fd46ac5c35fc" />

---

## Hackathon Prizes

<table>
<tr>
<td width="50%">

### ğŸ”µ Sui Prize

**DeepBook v3 Integration**

- Native CLOB trading
- On-chain constraint enforcement
- Shared object vault architecture
- Real autonomous agent spending

</td>
<td width="50%">

### ğŸ”· ENS Prize

**Most Creative Use of ENS for DeFi**

- Constraint profiles stored in ENS text records
- Pay to ENS names (alice.eth â†’ 0x...)
- Agent identity via ENS resolution
- Decentralized DeFi configuration

</td>
</tr>
</table>

---

## Key Features

### ğŸ›¡ï¸ On-Chain Constraints

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VAULT CONSTRAINTS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Daily Limit        â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â”‚  $100/day           â”‚
â”‚   Per-TX Limit       â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚  $25/transaction    â”‚
â”‚   Alert Threshold    â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â”‚  $80 (triggers event)â”‚
â”‚   Min Balance        â”‚â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚  $10 (floor)        â”‚
â”‚   Emergency Pause    â”‚ â—‹ OFF               â”‚  Owner can halt     â”‚
â”‚                                                                  â”‚
â”‚   âœ“ Enforced by Move VM - Cannot be bypassed                    â”‚
â”‚   âœ“ No backend, no multisig, pure smart contract               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”· ENS Constraint Profiles (Novel Feature!)

Instead of manually entering constraints, **load pre-configured profiles from ENS names**:

<img width="633" height="581" alt="ens profile" src="https://github.com/user-attachments/assets/5dbc6cf2-331c-4d85-a21c-259093ea53e5" />


**Why this is creative:**
- Goes beyond nameâ†’address mapping
- Uses ENS as a **decentralized DeFi configuration store**
- Profiles are **shareable and composable**
- Your risk tolerance, stored on-chain!

### ğŸ”„ ENS Name Resolution

<img width="541" height="559" alt="ens resolution flow" src="https://github.com/user-attachments/assets/04940078-a992-4cba-a9a1-00f111c1e937" />

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          AGENTVAULT ARCHITECTURE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚    ETHEREUM MAINNET                         SUI BLOCKCHAIN                      â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚
â”‚                                                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚               â”‚                        â”‚                               â”‚   â”‚
â”‚    â”‚   ENS        â”‚  â”€â”€â”€â”€ Resolve â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚      AgentVault Contract     â”‚   â”‚
â”‚    â”‚   Registry    â”‚       Names            â”‚                               â”‚   â”‚
â”‚    â”‚               â”‚                        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚   â”‚   Vault<T>            â”‚   â”‚   â”‚
â”‚           â”‚                                 â”‚   â”‚                       â”‚   â”‚   â”‚
â”‚           â”‚ Text Records                    â”‚   â”‚   owner: 0x...        â”‚   â”‚   â”‚
â”‚           â–¼                                 â”‚   â”‚   agent: 0x...        â”‚   â”‚   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚   â”‚   balance: 500 USDC   â”‚   â”‚   â”‚
â”‚    â”‚  Constraint   â”‚  â”€â”€â”€â”€ Load â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   â”‚   constraints: {...}  â”‚   â”‚   â”‚
â”‚    â”‚   Profiles    â”‚      Profiles          â”‚   â”‚   spent_today: 45     â”‚   â”‚   â”‚
â”‚    â”‚               â”‚                        â”‚   â”‚                       â”‚   â”‚   â”‚
â”‚    â”‚ daily: 100    â”‚                        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚    â”‚ perTx: 25     â”‚                        â”‚              â”‚                â”‚   â”‚
â”‚    â”‚ alert: 80     â”‚                        â”‚              â–¼                â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚                                             â”‚   â”‚  Constraint Check     â”‚   â”‚   â”‚
â”‚                                             â”‚   â”‚  (Move VM)            â”‚   â”‚   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚    â”‚               â”‚                        â”‚              â”‚                â”‚   â”‚
â”‚    â”‚    Owner      â”‚  â”€â”€â”€â”€ Create â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚              â–¼                â”‚   â”‚
â”‚    â”‚   (Human)     â”‚       Manage           â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚    â”‚               â”‚                        â”‚   â”‚  DeepBook v3          â”‚   â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚   â”‚  (CLOB Trading)       â”‚   â”‚   â”‚
â”‚                                             â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚              â”‚                â”‚   â”‚
â”‚    â”‚               â”‚                        â”‚              â–¼                â”‚   â”‚
â”‚    â”‚    Agent      â”‚  â”€â”€â”€â”€ Execute â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚    â”‚    (AI)       â”‚       Trades           â”‚   â”‚  Trade Executed       â”‚   â”‚   â”‚
â”‚    â”‚               â”‚                        â”‚   â”‚  or Rejected          â”‚   â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚                                             â”‚                               â”‚   â”‚
â”‚                                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Tech Stack

| Layer | Technology | Purpose |
|-------|------------|---------|
| **Smart Contracts** | Move (Sui) | Vault logic, constraint enforcement |
| **DEX** | DeepBook v3 | On-chain CLOB trading |
| **Name Resolution** | ENS (Ethereum) | Human-readable names, constraint profiles |
| **Backend** | Express.js + TypeScript | Transaction building, intent parsing |
| **Frontend** | React 18 + Vite | User interface |
| **Wallet** | Sui dapp-kit | Wallet connection |
| **ENS Library** | viem | ENS resolution |

---

## Project Structure

```
agentvault2/
â”œâ”€â”€ contracts/                    # Move smart contracts
â”‚   â”œâ”€â”€ sources/
â”‚   â”‚   â”œâ”€â”€ vault.move           # Core vault + constraint logic
â”‚   â”‚   â””â”€â”€ events.move          # Event definitions
â”‚   â””â”€â”€ Move.toml
â”‚
â”œâ”€â”€ backend/                      # Express API server
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ routes/              # API endpoints
â”‚       â”‚   â”œâ”€â”€ vault.ts         # Vault operations
â”‚       â”‚   â””â”€â”€ swap.ts          # DeepBook swaps
â”‚       â”œâ”€â”€ services/
â”‚       â”‚   â”œâ”€â”€ suiClient.ts     # Sui SDK wrapper
â”‚       â”‚   â”œâ”€â”€ intentParser.ts  # NLP to constraints
â”‚       â”‚   â””â”€â”€ swapService.ts   # DeepBook integration
â”‚       â””â”€â”€ config/
â”‚
â”œâ”€â”€ frontend/                     # React web app
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ App.tsx              # Main application
â”‚       â”œâ”€â”€ styles.css           # Brutalist styling
â”‚       â”œâ”€â”€ services/
â”‚       â”‚   â””â”€â”€ ensService.ts    # ğŸ”· ENS resolution
â”‚       â””â”€â”€ hooks/
â”‚           â””â”€â”€ useENS.ts        # ğŸ”· ENS React hooks
â”‚
â””â”€â”€ scripts/
    â””â”€â”€ demo-agent.ts            # Autonomous agent demo
```

---

## Quick Start

### Prerequisites

- Node.js 18+
- Sui wallet with testnet SUI
- (Optional) DEEP tokens for trading fees

### Installation

```bash
# Clone repository
git clone https://github.com/your-repo/agentvault2.git
cd agentvault2

# Install backend
cd backend && npm install

# Install frontend
cd ../frontend && npm install
```

### Configuration

```bash
# Backend (.env)
PACKAGE_ID=0x9eb66e8ef73279472ec71d9ff8e07e97e4cb3bca5b526091019c133e24a3b434
SUI_NETWORK=testnet

# Frontend (.env)
VITE_API_BASE=http://localhost:3001
VITE_PACKAGE_ID=0x9eb66e8ef73279472ec71d9ff8e07e97e4cb3bca5b526091019c133e24a3b434
```

### Run

```bash
# Terminal 1: Backend
cd backend && npm run dev

# Terminal 2: Frontend
cd frontend && npm run dev
```

Open http://localhost:5173

---

## Usage Guide

### 1ï¸âƒ£ Create a Vault with ENS Profile

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CREATE TAB                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  ğŸ”· Load ENS Profile                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚ â”‚Conservativeâ”‚ â”‚ Moderate   â”‚ â”‚ Aggressive â”‚ â† Click â”‚ â”‚
â”‚  â”‚ â”‚   $50/day  â”‚ â”‚  $200/day  â”‚ â”‚ $1000/day  â”‚        â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                            â”‚
â”‚  Or enter custom ENS: [myprofile.eth        ] [Load]      â”‚
â”‚                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ OR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”‚
â”‚                                                            â”‚
â”‚  ğŸ“ Manual: "Spend $100/day, max $25 per trade"           â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2ï¸âƒ£ Set Agent via ENS Name

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AGENT ADDRESS                                  ENS âœ“      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  [trading-bot.eth                              ]           â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ–¼ï¸  trading-bot.eth                                â”‚   â”‚
â”‚  â”‚     0x742d35Cc6634C0532925a3b...                   â”‚   â”‚
â”‚  â”‚                                         âœ… Verified â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ï¸âƒ£ Pay to ENS Names

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¸ EXECUTE PAYMENT                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  Recipient: [vitalik.eth                       ]           â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ–¼ï¸  vitalik.eth                                    â”‚   â”‚
â”‚  â”‚     0xd8dA6BF26964aF9D7eEd9e03...                  â”‚   â”‚
â”‚  â”‚                                         âœ… Verified â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                            â”‚
â”‚  Amount: [10.00                ] SUI                       â”‚
â”‚                                                            â”‚
â”‚  [        Send Payment        ]                            â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Smart Contract API

### Vault Operations

```move
// Create vault with constraints
public entry fun create_vault<T>(
    initial_deposit: Coin<T>,
    agent: address,
    daily_limit: u64,
    per_tx_limit: u64,
    alert_threshold: u64,
    yield_enabled: bool,
    min_balance: u64,
    clock: &Clock,
    ctx: &mut TxContext
)

// Agent executes payment (checked against constraints)
public entry fun execute_payment<T>(
    vault: &mut Vault<T>,
    recipient: address,
    amount: u64,
    clock: &Clock,
    ctx: &mut TxContext
)

// Agent executes swap on DeepBook v3
public entry fun execute_swap<BaseAsset, QuoteAsset>(
    vault: &mut Vault<QuoteAsset>,
    pool: &mut Pool<BaseAsset, QuoteAsset>,
    quantity: u64,
    min_base_out: u64,
    deep_in: Coin<DEEP>,
    is_bid: bool,
    clock: &Clock,
    ctx: &mut TxContext
)
```

### Owner Management

```move
public entry fun update_constraints<T>(vault, daily_limit, per_tx_limit, ...)
public entry fun set_paused<T>(vault, paused: bool, ...)
public entry fun set_agent<T>(vault, new_agent: address, ...)
public entry fun deposit<T>(vault, coin, ...)
public entry fun withdraw<T>(vault, amount, ...)
```

---

## ENS Integration Details

### Text Record Schema

Store constraint profiles in ENS text records:

| Key | Value | Description |
|-----|-------|-------------|
| `agentvault.dailyLimit` | `"100"` | Max daily spending |
| `agentvault.perTxLimit` | `"25"` | Max per transaction |
| `agentvault.alertThreshold` | `"80"` | Alert trigger point |
| `agentvault.minBalance` | `"10"` | Minimum vault balance |
| `agentvault.yieldEnabled` | `"true"` | Enable yield routing |
| `description` | `"..."` | Human-readable description |

### ENS Service Functions

```typescript
// Resolve ENS name to address
await resolveENSName("vitalik.eth") // â†’ "0xd8dA6BF26964aF..."

// Load constraint profile from ENS
await loadENSConstraintProfile("conservative.agentvault.eth")
// â†’ { dailyLimit: 50, perTxLimit: 10, ... }

// Full resolution with avatar
await resolveENSOrAddress("alice.eth")
// â†’ { address: "0x...", ensName: "alice.eth", avatar: "https://..." }
```

---

## Constraint Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CONSTRAINT VALIDATION FLOW                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  Agent calls execute_swap(vault, pool, quantity=30, ...)                       â”‚
â”‚                           â”‚                                                     â”‚
â”‚                           â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  1. CHECK: sender == vault.agent?                                        â”‚   â”‚
â”‚  â”‚     â””â”€â”€ âŒ Abort: ENotAgent                                              â”‚   â”‚
â”‚  â”‚     â””â”€â”€ âœ… Continue                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                                     â”‚
â”‚                           â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  2. CHECK: vault.paused == false?                                        â”‚   â”‚
â”‚  â”‚     â””â”€â”€ âŒ Abort: EVaultPaused                                           â”‚   â”‚
â”‚  â”‚     â””â”€â”€ âœ… Continue                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                                     â”‚
â”‚                           â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  3. CHECK: quantity <= per_tx_limit (25)?                                â”‚   â”‚
â”‚  â”‚     â””â”€â”€ 30 > 25 âŒ Abort: EExceedsPerTxLimit                             â”‚   â”‚
â”‚  â”‚     â””â”€â”€ âœ… Continue                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                                     â”‚
â”‚                           â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  4. CHECK: spent_today + quantity <= daily_limit (100)?                  â”‚   â”‚
â”‚  â”‚     â””â”€â”€ 45 + 30 = 75 â‰¤ 100 âœ… Continue                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                                     â”‚
â”‚                           â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  5. CHECK: balance - quantity >= min_balance (10)?                       â”‚   â”‚
â”‚  â”‚     â””â”€â”€ 500 - 30 = 470 â‰¥ 10 âœ… Continue                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                                     â”‚
â”‚                           â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  6. CHECK: spent_today + quantity >= alert_threshold (80)?               â”‚   â”‚
â”‚  â”‚     â””â”€â”€ 75 < 80 â†’ No alert                                               â”‚   â”‚
â”‚  â”‚     â””â”€â”€ If â‰¥ 80 â†’ Emit AlertTriggered event                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                                     â”‚
â”‚                           â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  7. EXECUTE: DeepBook swap                                               â”‚   â”‚
â”‚  â”‚     â””â”€â”€ Update spent_today = 75                                          â”‚   â”‚
â”‚  â”‚     â””â”€â”€ Emit SwapExecuted event                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Events

| Event | Description |
|-------|-------------|
| `VaultCreated` | New vault deployed |
| `PaymentExecuted` | Agent made a payment |
| `SwapExecuted` | Agent executed a swap |
| `AlertTriggered` | Spending exceeded alert threshold |
| `ConstraintsUpdated` | Owner changed limits |
| `VaultPaused` | Owner paused/unpaused vault |
| `FundsDeposited` | Owner added funds |
| `FundsWithdrawn` | Owner removed funds |

---

## Deployed Contracts

| Network | Package ID |
|---------|------------|
| Sui Testnet | `0x9eb66e8ef73279472ec71d9ff8e07e97e4cb3bca5b526091019c133e24a3b434` |

### DeepBook v3 Testnet Pools

| Pair | Pool ID |
|------|---------|
| DEEP/SUI | `0x0064034cf7f797e298bd9cd506f0e127ce511a798b3d9113e2f0cdb7e2c049f6` |
| SUI/DBUSDC | `0xe05dafb5133bcffb8d59f4e12465dc0e9faeaa05e3e342a08fe135800e3e4407` |
| DEEP/DBUSDC | `0xf948981b806057580f91622417534f491da5f61aeaf33d0ed8e69fd5691c95ce` |

---

## Security Model

| Feature | Implementation |
|---------|---------------|
| **On-chain enforcement** | Constraints checked by Move VM, not backend |
| **Shared objects** | Agents can transact without owner signature |
| **Daily reset** | Spending limits reset every 24 hours automatically |
| **Emergency pause** | Owner can halt all activity instantly |
| **No key sharing** | Agent uses its own keypair |
| **ENS verification** | Resolved addresses shown with verification badge |

---

## Future Roadmap

- [ ] Real ENS subdomain deployment for profiles
- [ ] Yield routing integration (Scallop, Navi)
- [ ] Multi-agent vaults
- [ ] Time-based constraints
- [ ] Whitelist/blacklist for recipients
- [ ] Mainnet deployment

---

## Demo

```bash
# Run the demo agent
cd scripts
npm install
npm run agent-demo
```

---

## Built For

<p align="center">
  <strong>ETHGlobal HackMoney 2026</strong>
</p>

<!-- <p align="center">
  <img src="https://assets.coingecko.com/coins/images/26375/standard/sui_asset.jpeg" width="40" alt="Sui" />
  <span>&nbsp;&nbsp;Sui Track&nbsp;&nbsp;</span>
  <img src="https://avatars.githubusercontent.com/u/47940724?s=200&v=4" width="40" alt="ENS" />
  <span>&nbsp;&nbsp;ENS Track</span>
</p> -->

---

## License

MIT

---

<p align="center">
  Built with â¤ï¸ on <strong>Move</strong> and <strong>Sui</strong>
</p>
